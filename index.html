<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<title>å¤§ç‰† ARï½œå®˜æ–¹åŽŸå§‹éŒ¨é»žæ¸¬è©¦</title>

<!-- å®˜æ–¹ç‰ˆæœ¬ï¼šA-Frame 1.6.0 + mind-ar 1.2.5 -->
<script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

<style>
  body{
    margin:0;
    overflow:hidden;
    background:#000;
    color:#0f0;
    font-family:monospace;
  }
</style>
</head>
<body>

<a-scene
  mindar-image="imageTargetSrc: ./wall-anchor.mind?v=20251113; autoStart: true"
  color-space="sRGB"
  renderer="colorManagement: true; physicallyCorrectLights: true"
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false">

  <a-assets timeout="30000">
    <video id="vid" src="./video.mp4"
           preload="auto"
           playsinline webkit-playsinline
           muted
           crossorigin="anonymous"></video>
  </a-assets>

  <!-- camera -->
  <a-camera position="0 0 0" look-controls="enabled:false"></a-camera>

  <!-- marker -->
  <a-entity id="marker" mindar-image-target="targetIndex:0">
    <a-plane id="plane"
      position="0 0 0"
      width="0.8" height="0.4"
      material="shader:flat; src:#vid; side:double; transparent:true; alphaTest:0.01">
    </a-plane>
  </a-entity>

</a-scene>

<script>
const v = document.getElementById('vid');
const marker = document.getElementById('marker');

// æ‰‹æ©Ÿä¸Šé»žä¸€ä¸‹æ‰èƒ½æ’­
function tryPlay(){ v.play().catch(()=>{}); }
['loadeddata','canplay'].forEach(ev => v.addEventListener(ev, tryPlay, {once:true}));
window.addEventListener('pointerdown', tryPlay, {once:true});
window.addEventListener('touchstart', tryPlay, {once:true, passive:true});

marker.addEventListener('targetFound', () => {
  console.log('ðŸŽ¯ targetFound');
  v.play().catch(()=>{});
});
marker.addEventListener('targetLost', () => {
  console.log('âš  targetLost');
});
</script>
</body>
</html>
